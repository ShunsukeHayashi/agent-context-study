# 実験03: スピード vs コンテキスト深度 - 結果

## 実験日時
2026-02-23 02:45-03:00 JST

## 3A: CLI直線型タスク（pytest修正）

### 条件
- タスク: 「pytest実行→失敗テストに合わせてソースコード修正→全pass」
- 3関数にValueErrorガード追加が正解

### 結果
| | Claude Code | Codex |
|--|-------------|-------|
| 時間 | 42.3秒 | **24.4秒** |
| トークン | 未計測 | 8,079 |
| 成功 | 9/9 pass | 9/9 pass |

### 考察
CLI直線型（コマンド実行→結果判定→修正→再実行）タスクではCodexが**1.7倍速い**。
Codexの「コマンド発動型」設計がこのパターンに最適化されている。

---

## 3B: 文脈統合型タスク（ADR違反レビュー）

### 条件
- タスク: 「src/user_service.py を docs/ のADR・スタイルガイドに照らしてレビュー」
- docs/ に2ファイル（architecture.md, style-guide.md）が存在
- ソースコードに意図的な違反コメント付き

### 結果
| | Claude Code | Codex |
|--|-------------|-------|
| 時間 | **41.4秒** | 45.2秒 |
| トークン | 未計測 | 7,760 |
| 違反検出数 | 10個 | 11個 |
| docs/ 参照 | ✅ | ✅ |
| ADR番号引用 | ✅ 正確 | ✅ 正確 |
| 修正案 | コード例付き | 方針のみ |
| サマリー | 重要度付き一覧表 | 優先修正順提案 |

### 考察
文脈統合型ではClaude Codeがやや速く、修正案がより具体的（コード例付き）。
ただしCodexも検出数では上回り、優先順位の提案もあった。
**予想に反して差は小さかった。**

---

## 実験02 vs 実験3Bの比較から得た核心的発見

### プロンプトの明示性とファイル参照の関係

| 条件 | Claude Code | Codex |
|------|------------|-------|
| プロンプトにファイル参照なし（実験02） | ✅ 自発的にdocs/を読む | ❌ 読まない |
| プロンプトにファイル参照あり（実験3B） | ✅ 読む | ✅ 読む |

**結論:**
> Codexは「明示的に指示されたファイル」は読む。「暗黙的に関連するファイル」は読まない。
> Claude Codeは暗黙的に関連するファイルも自発的に探索する。

### ツール設計への示唆
- Claude Code向け: 参照ポインタ（「docs/を見よ」）だけで十分
- Codex向け: プロンプトで明示的にファイルパスを指定するか、AGENTS.mdに情報をインライン展開する必要がある
- 両対応: プロンプトに参照先を明示しつつ、AGENTS.mdにも要約を書く（冗長だが安全）
